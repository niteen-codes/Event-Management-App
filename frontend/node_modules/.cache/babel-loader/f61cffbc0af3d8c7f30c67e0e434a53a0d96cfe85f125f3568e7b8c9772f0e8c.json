{"ast":null,"code":"var _jsxFileName = \"D:\\\\Event Management\\\\frontend\\\\src\\\\components\\\\EventList.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport io from \"socket.io-client\";\nimport \"./EventList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io(\"http://localhost:5000\");\nconst EventList = ({\n  events\n}) => {\n  _s();\n  const [attendees, setAttendees] = useState({});\n  useEffect(() => {\n    socket.on(\"attendeeUpdate\", data => {\n      setAttendees(prev => ({\n        ...prev,\n        [data.eventId]: data.attendees\n      }));\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n  const handleAttend = async eventId => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        alert(\"You need to log in to attend an event.\");\n        return;\n      }\n      await axios.post(`http://localhost:5000/api/events/${eventId}/attend`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      alert(\"You have successfully attended the event!\");\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n      console.error(\"Failed to attend event:\", ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || \"Unknown error\");\n      alert(`Failed to attend event: ${((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || \"Unknown error\"}`);\n    }\n  };\n  const handleLeave = async eventId => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        alert(\"You need to log in to leave an event.\");\n        return;\n      }\n      await axios.post(`http://localhost:5000/api/events/${eventId}/leave`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      alert(\"You have successfully left the event!\");\n    } catch (err) {\n      var _err$response3, _err$response3$data, _err$response4, _err$response4$data;\n      console.error(\"Failed to leave event:\", ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || \"Unknown error\");\n      alert(`Failed to leave event: ${((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.error) || \"Unknown error\"}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"event-list\",\n    children: events.map(event => {\n      var _attendees$event$_id, _event$attendees;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"event-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"event-name\",\n          children: event.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"event-description\",\n          children: event.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"event-date\",\n          children: [\"Date: \", new Date(event.date).toLocaleDateString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"event-attendees\",\n          children: [\"Attendees: \", ((_attendees$event$_id = attendees[event._id]) === null || _attendees$event$_id === void 0 ? void 0 : _attendees$event$_id.length) || ((_event$attendees = event.attendees) === null || _event$attendees === void 0 ? void 0 : _event$attendees.length) || 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAttend(event._id),\n          className: \"attend-button\",\n          children: \"Attend\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleLeave(event._id),\n          className: \"leave-button\",\n          children: \"Leave\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this)]\n      }, event._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n};\n_s(EventList, \"/5TNgptgpI1HXjgfIWTPkNOpMWo=\");\n_c = EventList;\nexport default EventList;\nvar _c;\n$RefreshReg$(_c, \"EventList\");","map":{"version":3,"names":["React","useEffect","useState","axios","io","jsxDEV","_jsxDEV","socket","EventList","events","_s","attendees","setAttendees","on","data","prev","eventId","disconnect","handleAttend","token","localStorage","getItem","alert","post","headers","Authorization","err","_err$response","_err$response$data","_err$response2","_err$response2$data","console","error","response","handleLeave","_err$response3","_err$response3$data","_err$response4","_err$response4$data","className","children","map","event","_attendees$event$_id","_event$attendees","name","fileName","_jsxFileName","lineNumber","columnNumber","description","Date","date","toLocaleDateString","_id","length","onClick","_c","$RefreshReg$"],"sources":["D:/Event Management/frontend/src/components/EventList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport io from \"socket.io-client\";\r\nimport \"./EventList.css\";\r\n\r\nconst socket = io(\"http://localhost:5000\");\r\n\r\nconst EventList = ({ events }) => {\r\n    const [attendees, setAttendees] = useState({});\r\n\r\n    useEffect(() => {\r\n        socket.on(\"attendeeUpdate\", (data) => {\r\n            setAttendees((prev) => ({ ...prev, [data.eventId]: data.attendees }));\r\n        });\r\n\r\n        return () => {\r\n            socket.disconnect();\r\n        };\r\n    }, []);\r\n\r\n    const handleAttend = async (eventId) => {\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            if (!token) {\r\n                alert(\"You need to log in to attend an event.\");\r\n                return;\r\n            }\r\n\r\n            await axios.post(\r\n                `http://localhost:5000/api/events/${eventId}/attend`,\r\n                {},\r\n                { headers: { Authorization: `Bearer ${token}` } }\r\n            );\r\n            alert(\"You have successfully attended the event!\");\r\n        } catch (err) {\r\n            console.error(\"Failed to attend event:\", err.response?.data?.error || \"Unknown error\");\r\n            alert(`Failed to attend event: ${err.response?.data?.error || \"Unknown error\"}`);\r\n        }\r\n    };\r\n\r\n    const handleLeave = async (eventId) => {\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            if (!token) {\r\n                alert(\"You need to log in to leave an event.\");\r\n                return;\r\n            }\r\n\r\n            await axios.post(\r\n                `http://localhost:5000/api/events/${eventId}/leave`,\r\n                {},\r\n                { headers: { Authorization: `Bearer ${token}` } }\r\n            );\r\n            alert(\"You have successfully left the event!\");\r\n        } catch (err) {\r\n            console.error(\"Failed to leave event:\", err.response?.data?.error || \"Unknown error\");\r\n            alert(`Failed to leave event: ${err.response?.data?.error || \"Unknown error\"}`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"event-list\">\r\n            {events.map((event) => (\r\n                <div key={event._id} className=\"event-card\">\r\n                    <h2 className=\"event-name\">{event.name}</h2>\r\n                    <p className=\"event-description\">{event.description}</p>\r\n                    <p className=\"event-date\">Date: {new Date(event.date).toLocaleDateString()}</p>\r\n                    <p className=\"event-attendees\">\r\n                        Attendees: {attendees[event._id]?.length || event.attendees?.length || 0}\r\n                    </p>\r\n                    <button onClick={() => handleAttend(event._id)} className=\"attend-button\">\r\n                        Attend\r\n                    </button>\r\n                    <button onClick={() => handleLeave(event._id)} className=\"leave-button\">\r\n                        Leave\r\n                    </button>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EventList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}